<section>
    <div class="container mt-5 mb-5">
        <div class="alert bg-dark alert-dismissible fade show" role="alert" id="alert" hidden>
            <strong class="text-success" id="alert-body"></strong>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true" class="text-success">&times;</span>
            </button>
        </div>
        {{#if cartItems}}
        <div class="row">
            <div class="col-md-8">
                <div class="card" style="width: 18rem;">
                    <div class="card-body">
                        <h5 class="p-2">My Cart (<span id="my-cart-count">{{cartCount}}</span>)</h5>
                        {{#each cartItems}}
                        <div id="div{{this.product._id}}" class="row mt-4 pb-4 border-bottom">
                            <div class="col-md-4">
                                <img src="/images/product-images/{{this.item}}.jpg" alt="" class="img-fluid">
                                <form class="form-inline my-2 my-lg-0 ml-5">
                                    <a role="button"
                                        onclick="changeProductQuantity(event, '{{this._id}}', '{{this.product._id}}', -1)"
                                        class="btn btn-light btn-sm border border-secondary font-weight-bold"
                                        style="width: 2em; height:2em;">-</a>
                                    <input id="{{this.product._id}}"
                                        class="form-control form-control-sm m-sm-2 text-center bg-white" type="text"
                                        name="count" value="{{this.quantity}}" readonly style="width: 3em; height:2em;">
                                    <a role="button"
                                        onclick="changeProductQuantity(event, '{{this._id}}', '{{this.product._id}}', 1)"
                                        class="btn btn-light btn-sm border border-secondary font-weight-bold"
                                        style="width: 2em; height:2em;">+</a>
                                </form>
                            </div>
                            <div class="col-md-8 d-flex flex-column justify-content-between flex-wrap">
                                <div>
                                    <h5>{{this.product.name}}</h5>
                                    <h6>{{this.product.category}}</h6>
                                    <p>{{this.product.description}}</p>
                                    <h5><span style="font-family: Roboto,Arial,sans-serif;">₹</span> <span
                                            id="{{this.product._id}}-price">{{this.product.price}}</span>
                                    </h5>
                                </div>
                                <div class="mb-5">
                                    <a role="button"
                                        onclick="removeFromCart(event, '{{this._id}}', '{{this.product._id}}')"
                                        class="font-weight-bold text-decoration-none text-danger">REMOVE</a>
                                </div>
                            </div>
                        </div>
                        {{/each}}
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card" style="width: 18rem;">
                    <div class="card-body pb-0">
                        <h6 class="text-secondary border-bottom pb-3">PRICE DETAILS</h6>
                        <div class="border-bottom p-3">
                            <div class="row">
                                <p>Price (<span id="price-section-count">{{cartCount}}</span> items)</p>
                                <p class="ml-auto"><span style="font-family: Roboto,Arial,sans-serif;">₹</span>
                                    <span id="total-price">{{totalAmount}}</span></p>
                            </div>
                            <div class="row">
                                <p>Delivery Charges</p>
                                <p class="ml-auto text-success">FREE</p>
                            </div>
                        </div>
                        <div class="row p-3">
                            <h6>Total Amount</h6>
                            <h6 class="ml-auto"><span style="font-family: Roboto,Arial,sans-serif;">₹</span> <span
                                    id="total-amount">{{totalAmount}}</span>
                            </h6>
                        </div>
                    </div>
                    <div class="card-footer pb-0" style="background-color: #fffbf6;">
                        <div class="row">
                            <div class="col-2 pt-2">
                                <svg width="2em" height="2em" viewBox="0 0 16 16"
                                    class="bi bi-shield-fill-check text-center text-success" fill="currentColor"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd"
                                        d="M8 .5c-.662 0-1.77.249-2.813.525a61.11 61.11 0 0 0-2.772.815 1.454 1.454 0 0 0-1.003 1.184c-.573 4.197.756 7.307 2.368 9.365a11.192 11.192 0 0 0 2.417 2.3c.371.256.715.451 1.007.586.27.124.558.225.796.225s.527-.101.796-.225c.292-.135.636-.33 1.007-.586a11.191 11.191 0 0 0 2.418-2.3c1.611-2.058 2.94-5.168 2.367-9.365a1.454 1.454 0 0 0-1.003-1.184 61.09 61.09 0 0 0-2.772-.815C9.77.749 8.663.5 8 .5zm2.854 6.354a.5.5 0 0 0-.708-.708L7.5 8.793 6.354 7.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z" />
                                </svg>
                            </div>
                            <div class="col-10 p-0">
                                <p class="ml-auto">Safe and Secure Payments.Easy returns.100% Authentic products.</p>
                            </div>
                        </div>
                    </div>
                    <div class="m-2">
                        <a href="/place-order" class="btn btn-primary font-weight-bold float-right"><span
                                class="small font-weight-bold ml-4 mr-4">PLACE ORDER</span></a>
                    </div>
                </div>
            </div>
        </div>
        {{else}}
        <div class="card" style="width: 18rem;">
            <div class="card-body">
                <h5 class="p-2">My Cart</h5>
                <div class="text-center empty-cart">
                    <img src="images/empty-cart.webp" class="img-fluid" style="width: 15rem;">
                    <h5 class="font-weight-normal">Your cart is empty!</h5>
                    <p class="small">Add items to it now.</p>
                    <a href="/" class="btn btn-primary pr-5 pl-5">Shop now</a>
                </div>
            </div>
        </div>
        {{/if}}
    </div>
</section>
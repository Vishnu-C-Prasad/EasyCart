<section>
    <div class="container my-5">
        <div class="row">
            <div class="col-md-8">
                <div class="accordion" id="accordionExample">
                    <div class="card">
                        <div class="card-header bg-primary p-0" id="headingOne">
                            <h2 class="mb-0">
                                <button class="btn btn-link text-white text-decoration-none" type="button"
                                    data-toggle="collapse" data-target="#collapseOne" aria-expanded="true"
                                    aria-controls="collapseOne">
                                    <h6 class="mb-1">DELIVERY ADDRESSES</h6>
                                </button>
                            </h2>
                        </div>

                        <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
                            data-parent="#accordionExample">
                            <div class="card-body">
                                {{#each user.addresses}}
                                <div class="row" onmouseover="document.getElementById('button{{this._id}}').removeAttribute('hidden');
                                    document.getElementById('radio{{this._id}}').setAttribute('checked', true)"
                                    onmouseout="document.getElementById('button{{this._id}}').setAttribute('hidden', true);
                                    document.getElementById('radio{{this._id}}').removeAttribute('checked')">
                                    <div class="col-1 my-auto text-center p-0">
                                        <input type="radio" class="form-radio-input" id="radio{{this._id}}" name=""
                                            value="onlinepayment">
                                    </div>
                                    <div class="col-11 p-0">
                                        <label for="radio{{this._id}}">
                                            <div class="border-bottom">
                                                <div class="py-4">
                                                    <h6>{{this.name}} &nbsp;&nbsp; {{this.mobile}}</h6>
                                                    <p class="m-0">{{this.address}}, {{this.locality}},
                                                        {{this.landmark}},
                                                        {{this.city}}, {{this.state}} - <span
                                                            class="font-weight-bold">{{this.pincode}}</span></p>
                                                </div>
                                                <button class="btn btn-primary mb-3 select-button" hidden
                                                    id="button{{this._id}}"
                                                    onclick="document.getElementById('address-id').value = '{{this._id}}'"
                                                    data-toggle="collapse" data-target="#collapseTwo"
                                                    aria-expanded="false" aria-controls="collapseTwo">
                                                    DELIVER HERE
                                                </button>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                {{/each}}
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header bg-primary p-0" id="headingTwo">
                            <h2 class="mb-0">
                                <button class="btn btn-link text-white text-decoration-none collapsed" type="button"
                                    data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false"
                                    aria-controls="collapseTwo">
                                    <h6 class="mb-1">ORDER SUMMARY</h6>
                                </button>
                            </h2>
                        </div>
                        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo"
                            data-parent="#accordionExample">
                            <div class="card-body" style="height: 42vh; overflow-x: hidden; overflow-y: auto;">
                                {{#each cartItems}}
                                <div id="div{{this.product._id}}" class="row mt-4 pb-4 border-bottom">
                                    <div class="col-md-4">
                                        <img src="/images/product-images/{{this.item}}.jpg" alt="" class="img-fluid">
                                        <form class="form-inline my-2 my-lg-0 ml-5">
                                            <a role="button"
                                                onclick="changeProductQuantity(event, '{{this._id}}', '{{this.product._id}}', -1)"
                                                class="btn btn-light btn-sm border border-secondary font-weight-bold"
                                                style="width: 2em; height:2em;">-</a>
                                            <input id="{{this.product._id}}"
                                                class="form-control form-control-sm m-sm-2 text-center bg-white"
                                                type="text" name="count" value="{{this.quantity}}" readonly
                                                style="width: 3em; height:2em;">
                                            <a role="button"
                                                onclick="changeProductQuantity(event, '{{this._id}}', '{{this.product._id}}', 1)"
                                                class="btn btn-light btn-sm border border-secondary font-weight-bold"
                                                style="width: 2em; height:2em;">+</a>
                                        </form>
                                    </div>
                                    <div class="col-md-8 d-flex flex-column justify-content-between flex-wrap">
                                        <div>
                                            <h5>{{this.product.name}}</h5>
                                            <h6>{{this.product.category}}</h6>
                                            <p>{{this.product.description}}</p>
                                            <h5><span style="font-family: Roboto,Arial,sans-serif;">₹</span> <span
                                                    id="{{this.product._id}}-price">{{this.product.price}}</span>
                                            </h5>
                                        </div>
                                        <div class="mb-5">
                                            <a role="button"
                                                onclick="removeFromCart(event, '{{this._id}}', '{{this.product._id}}')"
                                                class="font-weight-bold text-decoration-none text-danger">REMOVE</a>
                                        </div>
                                    </div>
                                </div>
                                {{/each}}
                            </div>
                            <button class="btn btn-primary float-right m-3" type="button" data-toggle="collapse"
                                data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                <h6 class="mb-1">CONTINUE</h6>
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header bg-primary p-0" id="headingThree">
                            <h2 class="mb-0">
                                <button class="btn btn-link text-white text-decoration-none collapsed" type="button"
                                    data-toggle="collapse" data-target="#collapseThree" aria-expanded="false"
                                    aria-controls="collapseThree">
                                    <h6 class="mb-1">PAYMENT OPTIONS</h6>
                                </button>
                            </h2>
                        </div>
                        <div id="collapseThree" class="collapse" aria-labelledby="headingThree"
                            data-parent="#accordionExample">
                            <div class="card-body">
                                <form action="" id="checkout-form">
                                    <div class="card-body">
                                        <input type="text" class="form-control" id="address-id" name="addressId" hidden>
                                        <div class="form-group form-radio">
                                            <input type="radio" class="form-radio-input" id="Cod" name="paymentMethod"
                                                value="COD" checked>
                                            <label class="form-radio-label" for="Cod">Cash on Delivery (COD)</label>
                                        </div>
                                        <div class="form-group form-radio">
                                            <input type="radio" class="form-radio-input" id="Online-payment"
                                                name="paymentMethod" value="onlinepayment">
                                            <label class="form-radio-label" for="Online-payment">Online payment</label>
                                        </div>
                                    </div>
                                        <button type="submit" class="btn btn-primary float-right mb-3">CHECKOUT</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card" style="width: 18rem;">
                    <div class="card-body pb-0">
                        <h6 class="text-secondary border-bottom pb-3">PRICE DETAILS</h6>
                        <div class="border-bottom p-3">
                            <div class="row">
                                <p>Price (<span id="price-section-count">{{cartCount}}</span> items)</p>
                                <p class="ml-auto"><span style="font-family: Roboto,Arial,sans-serif;">₹</span>
                                    <span id="total-price">{{totalAmount}}</span></p>
                            </div>
                            <div class="row">
                                <p>Delivery Charges</p>
                                <p class="ml-auto text-success">FREE</p>
                            </div>
                        </div>
                        <div class="row p-3">
                            <h6>Total Amount</h6>
                            <h6 class="ml-auto"><span style="font-family: Roboto,Arial,sans-serif;">₹</span> <span
                                    id="total-amount">{{totalAmount}}</span>
                            </h6>
                        </div>
                    </div>
                    <div class="card-footer pb-0" style="background-color: #fffbf6;">
                        <div class="row">
                            <div class="col-2 pt-2">
                                <svg width="2em" height="2em" viewBox="0 0 16 16"
                                    class="bi bi-shield-fill-check text-center text-success" fill="currentColor"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd"
                                        d="M8 .5c-.662 0-1.77.249-2.813.525a61.11 61.11 0 0 0-2.772.815 1.454 1.454 0 0 0-1.003 1.184c-.573 4.197.756 7.307 2.368 9.365a11.192 11.192 0 0 0 2.417 2.3c.371.256.715.451 1.007.586.27.124.558.225.796.225s.527-.101.796-.225c.292-.135.636-.33 1.007-.586a11.191 11.191 0 0 0 2.418-2.3c1.611-2.058 2.94-5.168 2.367-9.365a1.454 1.454 0 0 0-1.003-1.184 61.09 61.09 0 0 0-2.772-.815C9.77.749 8.663.5 8 .5zm2.854 6.354a.5.5 0 0 0-.708-.708L7.5 8.793 6.354 7.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z" />
                                </svg>
                            </div>
                            <div class="col-10 p-0">
                                <p class="ml-auto">Safe and Secure Payments.Easy returns.100% Authentic products.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>